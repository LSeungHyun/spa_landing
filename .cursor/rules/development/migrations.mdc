---
description: 
globs: 
alwaysApply: true
---
# ğŸŒ ì–¸ì–´ ì‚¬ìš© ê·œì¹™ (Language Usage Rules)

**ê¸°ë³¸ ì–¸ì–´**: í•œêµ­ì–´
- ëª¨ë“  ë‹µë³€ê³¼ ì„¤ëª…ì€ í•œêµ­ì–´ë¡œ ì œê³µ
- ì½”ë“œ ì£¼ì„ê³¼ ë³€ìˆ˜ëª…ì€ ì˜ì–´ ì‚¬ìš© (ê°œë°œ í‘œì¤€)
- ê¸°ìˆ  ë¬¸ì„œëŠ” í•œêµ­ì–´ ìš°ì„ , í•„ìš”ì‹œ ì˜ì–´ ë³‘ê¸°

---

description: Migration naming rules
globs: supabase/migrations/*.sql
alwaysApply: true

**ì¤‘ìš”**: ëª¨ë“  ë‹µë³€ê³¼ ì„¤ëª…ì€ í•œêµ­ì–´ë¡œ ì œê³µí•´ì£¼ì„¸ìš”.

# ğŸ“¦ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ëª…ëª… ê·œì¹™ (Migration File Naming Convention)

## ğŸ” ê°œìš”

ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì€ ë°˜ë“œì‹œ **ìˆœë²ˆ ê¸°ë°˜ ëª…ëª… ê·œì¹™**ì„ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë³€ê²½ì˜ ìˆœì„œì™€ ì¶”ì ì„ ìœ„í•´ ì¤‘ìš”í•©ë‹ˆë‹¤.

## âœ… í•„ìˆ˜ ëª…ëª… ê·œì¹™

**ëª¨ë“  ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì€ ë‹¤ìŒ í˜•ì‹ì„ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤:**

```
NNN_feature_description.sql
```

- `NNN`: ìˆœì°¨ì ì¸ ë²ˆí˜¸ (001, 002, 003, ...)
- `feature_description`: ë§ˆì´ê·¸ë ˆì´ì…˜ì˜ ëª©ì ì„ ì¼€ë°¥ ì¼€ì´ìŠ¤ë¡œ ì„¤ëª…

**ì˜ˆì‹œ:**
```
001_user_suggestions.sql
002_create_partner_tables.sql
003_add_vendor_images_bucket.sql
```

## âš ï¸ ê²½ê³  ë° ì œí•œ ì‚¬í•­

- ë‚ ì§œ í˜•ì‹(`YYYYMMDD_`)ì„ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.
- ìˆœì°¨ì ì¸ ìˆ«ìë§Œ ì‚¬ìš©í•˜ì„¸ìš”.
- ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ìƒì„±í•  ë•ŒëŠ” í•­ìƒ `create-migration.ps1` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

## ğŸ› ï¸ ì˜¬ë°”ë¥¸ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„± ë°©ë²•

ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ìƒì„±í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”:

```powershell
.\supabase\create-migration.ps1 "ê¸°ëŠ¥_ì„¤ëª…"
```

## ğŸ“‹ ë§ˆì´ê·¸ë ˆì´ì…˜ í—¤ë” í˜•ì‹

ëª¨ë“  ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì€ ë‹¤ìŒ í˜•ì‹ì˜ í—¤ë”ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:

```sql
-- Migration: NNN_feature_description
-- Description: ì´ ë§ˆì´ê·¸ë ˆì´ì…˜ì˜ ëª©ì ì— ëŒ€í•œ ì„¤ëª…
-- Author: ì‘ì„±ì ì´ë¦„
-- Date: YYYY-MM-DD
-- 
-- Changes:
-- 1. ë³€ê²½ ì‚¬í•­ 1
-- 2. ë³€ê²½ ì‚¬í•­ 2
```

## ğŸ”„ ìœ íš¨ì„± ê²€ì‚¬

ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì´ ê·œì¹™ì„ ì¤€ìˆ˜í•˜ëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:

```powershell
.\supabase\validate-migrations.ps1
```

---

# ğŸ“¦ Migration File Naming Convention

## ğŸ” Overview

Migration files must follow a **sequence-based naming convention**. This is crucial for tracking the order of database schema changes.

## âœ… Required Naming Rules

**All migration files must follow this format:**

```
NNN_feature_description.sql
```

- `NNN`: Sequential number (001, 002, 003, ...)
- `feature_description`: Purpose of the migration in kebab-case

**Examples:**
```
001_user_suggestions.sql
002_create_partner_tables.sql
003_add_vendor_images_bucket.sql
```

## âš ï¸ Warnings and Restrictions

- Do not use date formats (`YYYYMMDD_`).
- Use sequential numbers only.
- Always use the `create-migration.ps1` script to create migration files.

## ğŸ› ï¸ How to Create Migration Files Correctly

To create a migration file, use the following command:

```powershell
.\supabase\create-migration.ps1 "feature_description"
```

## ğŸ“‹ Migration Header Format

All migration files must include a header in the following format:

```sql
-- Migration: NNN_feature_description
-- Description: Purpose of this migration
-- Author: Author's name
-- Date: YYYY-MM-DD
-- 
-- Changes:
-- 1. Change 1
-- 2. Change 2
```

## ğŸ”„ Validation

To verify that your migration files comply with the rules, run:

```powershell
.\supabase\validate-migrations.ps1
```
```
.



